$(function(){function a(){$("html, body").stop(!0,!0).animate({scrollTop:$("#pubpix-wrapper").offset().top},300)}function b(){$("#pubpix-map__hintbox").attr("data-pubpix_hintbox","hide")}$pubpixCarPark=$("g[id^='pubpix-svg__map-p']"),$pubpixLang=$("#pubpix-wrapper").attr("data-pubpix_lang");var c=$.getJSON("parkingmap_data/"+$pubpixLang,function(a){$.each(a,function(a,b){$("#pubpix-svg__map-"+b.item).attr("data-pubpix_category",b.category).attr("data-pubpix_bookable",b.bookable)});var b=$("#pubpix-tmpl-info--head").render(c.responseJSON),d=$("#pubpix-tmpl-info--body").render(c.responseJSON);$("#pubpix-info__head").html(b),$("#pubpix-info__body").html(d),-1!=navigator.userAgent.indexOf("Mac OS X")&&($(".pubpix-info__head__sign").css("padding","10px 10px 10px"),$(".pubpix-info__head__sign span").css("bottom","2px"),$(".pubpix-info__head__field--button a").css("line-height","36px"),$(".pubpix-info__head__indicator-arrow").css("line-height","98px")),$(".pubpix-info__body__accordion").bind("click",function(){"open"===$(this).attr("data-pubpix_acc")?$(this).attr("data-pubpix_acc","close"):$(this).attr("data-pubpix_acc","open")}),$('[class^="pubpix-info--"]').hide(),$(".pubpix-info__head__field--route").each(function(a){$(this).find("img").attr("src").indexOf("parking__.svg")>=0&&$(this).remove()})});$("#pubpix-map__hintbox-info-icon").on("click",function(){"show"===$("#pubpix-map__hintbox").attr("data-pubpix_hintbox")?$("#pubpix-map__hintbox").attr("data-pubpix_hintbox","hide"):($("#pubpix-map__hintbox").attr("data-pubpix_hintbox","show"),$("[id^='pubpix-svg__map-sign-']").removeClass("pubpix-hide"))}),$("#pubpix-background").on("click",function(){$("[id^='pubpix-svg__map-sign-']").removeClass("pubpix-hide")}),$(".pubpix-map__legend__btn").on("click",function(){a(),b(),$("#pubpix-info__head").css({"margin-top":"-80px",opacity:0}),setTimeout(function(){$("#pubpix-info__head").find('[class^="pubpix-info--"]').hide().children().addClass("pubpix-hide")},300),$("#pubpix-info__body").stop(!0,!0).animate({opacity:0,height:"0","min-height":"0"},300,function(){$('#pubpix-info__body [class^="pubpix-info--"]').hide().children().addClass("pubpix-hide")}),$pubpixCarPark.removeClass("pubpix-svg__map-p--filtered"),"true"===$(this).attr("data-pubpix_active")?$(this).attr("data-pubpix_active","false"):($category=$(this).attr("data-pubpix_category"),$(".pubpix-map__legend__btn").attr("data-pubpix_active","false"),$(this).attr("data-pubpix_active","true"),$pubpixCarPark.attr("data-pubpix_active","false").attr("transform","translate(0 0)").find(".pubpix-svg__map-st7, .pubpix-svg__map-st15").removeAttr("filter"),$("[id^='pubpix-svg__map-sign-']").attr("transform","translate(0 0)").addClass("pubpix-hide"),$("g[id^='pubpix-svg__map-p'][data-pubpix_category~="+$category+"]").addClass("pubpix-svg__map-p--filtered").attr("data-pubpix_category",function(a){}).next("[id^='pubpix-svg__map-sign-']").removeClass("pubpix-hide"),$("[data-pubpix_category~="+$category+"]").each(function(){var a=$(this).attr("data-pubpix_category"),b="",c=new RegExp("\\b(?!"+$category+"\\b)\\w+","g");a.replace(c,function(c){b+=c+" ",a=$category+" "+b}),$(this).attr("data-pubpix_category",a)})),"valet"===$(this).attr("data-pubpix_category")&&"true"===$(this).attr("data-pubpix_active")?($(".valet-keys").attr("data-pubpix-active","true"),$(".pubpix-key_module").attr("data-pubpix-active","true")):($(".valet-keys").attr("data-pubpix-active","false"),$(".pubpix-key_module").attr("data-pubpix-active","false"))}),$pubpixCarPark.hover(function(){$pubpixCarPark.not('[data-pubpix_active="true"]').next("g").addClass("pubpix-hide"),"false"===$(this).attr("data-pubpix_active")&&($(this).attr("transform","translate(0 -5)").next("g").attr("transform","translate(0 -5)"),"pubpix-svg__map-p41nold"===$(this).attr("id")||"pubpix-svg__map-p41s"===$(this).attr("id")||"pubpix-svg__map-p84"===$(this).attr("id")||"pubpix-svg__map-p35"===$(this).attr("id")||"pubpix-svg__map-p27"===$(this).attr("id")?$(this).find(".pubpix-svg__map-st15").attr("filter","url(#dropshadow-flat)"):$(this).find(".pubpix-svg__map-st7").attr("filter","url(#dropshadow)"),$(this).next("g").removeClass("pubpix-hide"))},function(){"false"===$(this).attr("data-pubpix_active")?($(this).attr("transform","translate(0 0)").find(".pubpix-svg__map-st7, .pubpix-svg__map-st15").removeAttr("filter"),$(this).next("g").attr("transform","translate(0 0)").addClass("pubpix-hide")):($(this).attr("transform","translate(0 0)").find(".pubpix-svg__map-st7, .pubpix-svg__map-st15").removeAttr("filter"),$(this).next("g").attr("transform","translate(0 0)"))}),$pubpixCarPark.on("click",function(){if($(window).width()>980&&(a(),b(),$(".pubpix-map__legend__btn").attr("data-pubpix_active","false"),$(".valet-keys").attr("data-pubpix-active","false"),"false"===$(this).attr("data-pubpix_active"))){switch($pubpixCarPark.removeClass("pubpix-svg__map-p--filtered"),$(this).attr("id").replace("pubpix-svg__map-","")){case "p3": $carParkNum = 0; break; case "p20": $carParkNum = 1; break; case "p26": $carParkNum = 2; break; case "p44": $carParkNum = 3; break; case "p51": $carParkNum = 4; break; case "paudihaupt": $carParkNum = 5; break; case "paudiatc": $carParkNum = 6; break; case "phubost": $carParkNum = 7; break; case "peniost": $carParkNum = 8}$pubpixCarPark.attr("data-pubpix_active","false").attr("transform","translate(0 0)").find(".pubpix-svg__map-st7, .pubpix-svg__map-st15").removeAttr("filter"),$(this).attr("data-pubpix_active","true"),"pubpix-svg__map-p41nold"===$(this).attr("id")?$(this).find(".pubpix-svg__map-st15").attr("filter","url(#dropshadow-p41n)"):$(this).find(".pubpix-svg__map-st7").attr("filter"),$("[id^='pubpix-svg__map-sign-']").attr("transform","translate(0 0)").addClass("pubpix-hide"),$(this).next("g").attr("transform","translate(0 0)").removeClass("pubpix-hide"),"-80px"===$("#pubpix-info__head").css("margin-top")?$("#pubpix-info__head").css({"margin-top":"0",opacity:1}).find(".pubpix-info--"+$carParkNum).show().children().removeClass("pubpix-hide"):($("#pubpix-info__head").addClass("pubpix-flip"),setTimeout(function(){$("#pubpix-info__head").css("background","linear-gradient(#ddd,#eee,#f2f2f2,#eee,#ddd)").find('[class^="pubpix-info--"]').hide().children().addClass("pubpix-hide")},120),setTimeout(function(){$("#pubpix-info__head").css("background","#f2f2f2").find(".pubpix-info--"+$carParkNum).show().children().removeClass("pubpix-hide")},360),setTimeout(function(){$("#pubpix-info__head").removeClass("pubpix-flip")},800)),$("#pubpix-info__body").stop(!0,!0).animate({opacity:1,"min-height":"100px"},300),$("#pubpix-info__body [class^='pubpix-info--']").children().addClass("pubpix-hide"),setTimeout(function(){$("#pubpix-info__body").height($("#pubpix-info__body").height()),$('#pubpix-info__body [class^="pubpix-info--"]').hide(),$("#pubpix-info__body .pubpix-info--"+$carParkNum).show().children().removeClass("pubpix-hide");var a=0;$("#pubpix-info__body .pubpix-info--"+$carParkNum).children().each(function(){a+=$(this).outerHeight(!0)}),$("#pubpix-info__body").stop(!0,!0).animate({height:a},300,function(){$("#pubpix-info__body").css("height","auto")})},300)}})});
